<div class="control-section">
    <ejs-grid #grid id="group-aggregate-grid" [dataSource]="data" [allowGrouping]="true" [allowSorting]='true' [enableHover]='false' [allowMultiSorting]='true' [height]='300' [gridLines]="gridLines" [allowFiltering]='true' [filterSettings]='filterSettings' [groupSettings]="groupSettings">
        <e-columns>
            <e-column field='ID' visible="false" isPrimaryKey="true"></e-column>
            <e-column field='Month' headerText='Month' width='120' textAlign='Right' format="yMd" clipMode='EllipsisWithTooltip'></e-column>
            <e-column field='ConsumptionCategory' headerText="Category" width='130' textAlign='Left' clipMode='EllipsisWithTooltip'></e-column>
            <e-column  textAlign='Center' [columns]="energyColumns">
                <ng-template #headerTemplate>
                    <span class="energy e-icons e-icon"></span>
                    <span> Energy (KWh)</span>
                </ng-template>
            </e-column>
            <e-column field='WeatherCondition' headerText='Weather' width='120' textAlign="Left" clipMode='EllipsisWithTooltip'></e-column>
            <e-column field="EnergyPrice" headerText="Price ($)" width='130' textAlign="Right" format="C2" clipMode='EllipsisWithTooltip'></e-column>
        </e-columns>
        <e-aggregates>
            <e-aggregate>
                <e-columns>
                    <e-column type="Sum" field="EnergyProduced" format="N2">
                          <ng-template #footerTemplate let-data>Total Energy Produced: {{data.Sum}} KWh</ng-template>
                    </e-column>
                    <e-column type="Average" field="EnergyProduced" format="N2">
                        <ng-template #footerTemplate let-data>Average Energy Produced: {{data.Average}} KWh</ng-template>
                    </e-column>
                </e-columns>
            </e-aggregate>
            <e-aggregate>
                <e-columns>
                    <e-column type="Average" field="EnergyProduced" format="N2">
                        <ng-template #footerTemplate let-data>Average Energy Produced: {{data.Average}} KWh</ng-template>
                    </e-column>
                </e-columns>
            </e-aggregate>
            <e-aggregate>
                <e-columns>
                    <e-column [type]="['Min','Max']" field="EnergyProduced" format="N2">
                        <ng-template #groupCaptionTemplate let-data><div class="e-grid-group-caption-temp"><span class="e-minimum">Min: {{data.Min}}</span><span>||</span> <span class="e-maximum"> Max : {{data.Max}}</span></div></ng-template>
                    </e-column>
                </e-columns>
            </e-aggregate>
            <e-aggregate>
                <e-columns>
                    <e-column type="Sum" field="EnergyProduced" format="N2">
                        <ng-template #groupFooterTemplate let-data>Total Energy Produced: {{data.Sum}} KWh</ng-template>
                    </e-column>
                </e-columns>
            </e-aggregate>
        </e-aggregates>
    </ejs-grid>
    <div id="action-description">
        <p>This sample demonstrates the aggregate functionality of the Grid. In this sample, the “Energy Produced” column will displays its <code>sum</code> aggregate value in the group footer and the <code>min</code> and <code>max</code> aggregate values in group caption.</p>
    </div>
    <div id="description">
        <p>The Grid supports displaying aggregates in its footer, group footer and group caption.
            The aggregate configurations can be provided by the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/#aggregates">
                aggregates
                </a></code> property.</p>
            <p>Built-in aggregates:</p>
             <ul>
                <li><code>Sum</code></li>     
                <li><code>Average</code></li>     
                <li><code>Min</code></li>     
                <li><code>Max</code></li>     
                <li><code>Count</code></li>     
                <li><code>TrueCount</code></li>     
                <li><code>FalseCount</code></li>     
                <li><code>Custom</code> - Requires the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#customaggregate">
                customAggregate
                </a></code> property to perform the aggregation.
                The custom aggregate value can be accessed inside template using the key <code>custom</code>.</li>     
            </ul>    
            <p>
                In this demo, the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#groupfootertemplate">
                groupFooterTemplate</a></code> property is used to display the group footer aggregation for the <strong><i>Energy Produced</i></strong> column and the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#groupcaptiontemplate">
                groupCaptionTemplate</a></code> property is used to display its group caption aggregation.
            </p>    
            <p>    To enable group footer aggregation for the <strong><i>Energy Produced</i></strong> column, use the <code>Sum</code> aggregate type by setting the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#type">
                type</a></code> and set the <code><a target="_blank" class="code"
         href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#field">
                field</a></code> property to <strong><i>EnergyProduced</i></strong> which will be used to perform the aggregation.
                The aggregate value is accessed inside the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#groupfootertemplate">
                groupFooterTemplate</a></code> using its <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#type">
                type</a></code> name (<code>Sum</code>).
            </p>
            <p>    To enable group caption aggregation for the <strong><i>Energy Produced</i></strong> column, the <code>max</code> and <code>min</code>aggregate types are used by setting the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#type">
                type</a></code> and the <code><a target="_blank" class="code"
         href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#field">
                field</a></code> property is set to <strong><i>EnergyProduced</i></strong>, which will be used to perform the aggregation.
                The aggregate value is accessed inside the<code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#groupcaptiontemplate">
                groupCaptionTemplate</a></code> using its <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#type">
                type</a></code> name (<code>Max</code> and <code>Min</code>).
            </p>
            <p>In this sample, we use the <code><a target="_blank" class="code"
                href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateColumn/#groupcaptiontemplate">
                groupCaptionTemplate</a></code> to show multiple aggregate values.</p>
        <p style="font-weight: 500">Injecting Module:</p>
        <p>
                Grid features are segregated into individual feature-wise modules. 
                To use aggregate feature, we need to inject
                <code>Aggregate</code> module using the <code>Grid.Inject(Aggregate)</code> section. 
        </p>
        <p>
            More information on the stacked header configuration can be found in this
            <a target="_blank" href="https://ej2.syncfusion.com/angular/documentation/api/grid/aggregateDirective/#columns">documentation section</a>.
        </p>
    </div>
</div>
    <style>
        .e-maximum{
            color:#008000;
            font-weight: bold;
        }
        .e-minimum{
            color:#dc3545;
            font-weight: bold;
        }
        
        .bootstrap5 .e-grid .e-icon.energy.e-icons::before,
        .bootstrap5-dark .e-grid .e-icon.energy.e-icons::before {
            content: '\e8cd';
        }
        
        .highcontrast .e-grid .e-icon.energy.e-icons::before {
            content: '\e991';
        }
        
        .tailwind .e-grid .e-icon.energy.e-icons::before,
        .tailwind-dark .e-grid .e-icon.energy.e-icons::before,
        .fluent .e-grid .e-icon.energy.e-icons::before,
        .fluent-dark .e-grid .e-icon.energy.e-icons::before,
        .fluent2 .e-grid .e-icon.energy.e-icons::before,
        .fluent2-dark .e-grid .e-icon.energy.e-icons::before,
        .fluent2-highcontrast .e-grid .e-icon.energy.e-icons::before,
        .material3 .e-grid .e-icon.energy.e-icons::before,
        .material3-dark .e-grid .e-icon.energy.e-icons::before {
            content: '\e8cd';
        }
    
        #group-aggregate-grid.e-grid tr.e-altrow .e-rowcell:not(.e-selectionbackground.e-active) {
        background-color: rgb(228 228 228 / 15%);
    }
        .e-grid-group-caption-temp {
            display: flex;
            gap: 5px;
        }
    </style>
    
